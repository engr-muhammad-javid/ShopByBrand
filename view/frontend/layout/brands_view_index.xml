<?xml version="1.0"?>
<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      layout="2columns-left"
      xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">

    <body>
        <attribute name="class" value="page-products brand-view-page catalog-category-view"/>

        <!-- Sidebar -->
        <referenceContainer name="sidebar.main">
            <!-- Navigation State -->
            <block class="Magento\LayeredNavigation\Block\Navigation\State"
                   name="catalog.navigation.state"
                   before="-"
                   template="Magento_LayeredNavigation::layer/state.phtml"/>
            
            <!-- Layered Navigation - CUSTOM BLOCK -->
            <block class="Zeta\ShopByBrand\Block\Navigation"
                   name="catalog.leftnav"
                   before="-"
                   template="Magento_LayeredNavigation::layer/view.phtml"/>
        </referenceContainer>

        <!-- Content -->
        <referenceContainer name="content">
            <block class="Zeta\ShopByBrand\Block\Brand\View"
                   name="brand.products.list"
                   template="Zeta_ShopByBrand::brand/view.phtml">
                <arguments>
                    <argument name="view_model" xsi:type="object">Zeta\ShopByBrand\ViewModel\BrandList</argument>
                </arguments>

                <!-- Toolbar -->
                <block class="Magento\Catalog\Block\Product\ProductList\Toolbar"
                       name="product_list_toolbar"
                       as="toolbar"
                       template="Magento_Catalog::product/list/toolbar.phtml">
                    <block class="Magento\Theme\Block\Html\Pager"
                           name="product_list_toolbar_pager"
                           as="pager"/>
                </block>
            </block>
        </referenceContainer>
    </body>
</page>